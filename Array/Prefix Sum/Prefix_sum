ğŸ§ â• Prefix Sum Pattern Cheat Sheet
ğŸ“˜ What is Prefix Sum?
Prefix Sum is a technique used to quickly calculate the sum of any subarray.
Instead of re-adding every time, we precompute cumulative sums once and then use subtraction!

ğŸ§© Why Use It?
âœ… When you need many sum queries on the same array
âœ… To avoid O(nÂ²) loops
âœ… Helpful in problems like:

Range sum queries

Subarray sum = K

Pivot index

Equilibrium point

ğŸ”¢ Prefix Sum Formula
text
Copy
Edit
prefix[i] = prefix[i - 1] + arr[i]
To find the sum of any subarray from i to j:

text
Copy
Edit
sum(i, j) = prefix[j] - prefix[i - 1]
âœ… Example Problems
ğŸŒŸ Example 1: Range Sum Query
Input:
arr = [1, 2, 3, 4, 5], Query: sum(1, 3)
Output: 9 â†’ 2 + 3 + 4

ğŸ’¡ Approach:
Create a prefix[] array

For sum from i to j, use:
prefix[j] - prefix[i - 1]

ğŸ‘¨â€ğŸ’» Java Code:
java
Copy
Edit
int[] buildPrefixSum(int[] arr) {
    int[] prefix = new int[arr.length];
    prefix[0] = arr[0];

    for (int i = 1; i < arr.length; i++) {
        prefix[i] = prefix[i - 1] + arr[i];
    }
    return prefix;
}

int rangeSum(int[] prefix, int i, int j) {
    if (i == 0) return prefix[j];
    return prefix[j] - prefix[i - 1];
}
ğŸŒŸ Example 2: Pivot Index ğŸ‹ï¸
Problem: Find index where left sum = right sum
Input: [1, 7, 3, 6, 5, 6]
Output: 3

ğŸ’¡ Approach:
Total sum = 28

Left sum = 1 + 7 + 3 = 11

Right sum = 5 + 6 = 11 â‡’ Balanced!

ğŸ‘¨â€ğŸ’» Java Code:
java
Copy
Edit
int findPivotIndex(int[] nums) {
    int total = 0, left = 0;
    for (int n : nums) total += n;

    for (int i = 0; i < nums.length; i++) {
        if (left == total - left - nums[i]) return i;
        left += nums[i];
    }
    return -1;
}
ğŸŒŸ Example 3: Subarray Sum Equals K ğŸ¯
Problem: Count subarrays that sum to k
Input: arr = [1, 1, 1], k = 2
Output: 2

ğŸ’¡ Approach:
Use HashMap to store prefixSum frequency

If prefixSum - k exists â†’ subarray found!

ğŸ‘¨â€ğŸ’» Java Code:
java
Copy
Edit
int subarraySum(int[] nums, int k) {
    Map<Integer, Integer> map = new HashMap<>();
    map.put(0, 1);
    int sum = 0, count = 0;

    for (int num : nums) {
        sum += num;
        count += map.getOrDefault(sum - k, 0);
        map.put(sum, map.getOrDefault(sum, 0) + 1);
    }
    return count;
}
ğŸ§  Summary Table ğŸ“‹
Pattern	Use Case	Tools Used	Time	Space
â• Prefix Sum	Range sum, subarray sums	Array, HashMap	O(n)	O(n)

